<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact – Le Jardin d'Arthur</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900 font-sans leading-relaxed">
    <a href="#main-content" class="sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 focus:bg-white focus:px-4 focus:py-2 focus:z-50">
        Aller au contenu principal
    </a>
    <header class="bg-green-700 text-white">
        <div class="container mx-auto px-4 py-6 flex flex-col md:flex-row justify-between items-center">
            <h1 class="text-2xl font-bold">Contact – Le Jardin d'Arthur</h1>
            <nav aria-label="Navigation principale">
                <ul class="flex space-x-6">
                    <li><a href="index.html" class="hover:underline focus:underline">Accueil</a></li>
                    <li><a href="produit.html" class="hover:underline focus:underline">Produit</a></li>
                    <li><a href="contact.html" class="hover:underline focus:underline">Contact</a></li>
                    <li><a href="a-propos.html" class="hover:underline focus:underline">À propos</a></li>
                    <li><a href="definitions.html#definitions-heading" class="hover:underline focus:underline">Définitions</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main id="main-content" class="container mx-auto px-4 py-8">
        <h2 class="text-3xl font-extrabold text-green-800 mb-8 text-center tracking-tight">Contactez-nous</h2>
        <section aria-labelledby="contact-form" class="flex flex-col md:flex-row md:space-x-10 items-start">
            <div class="md:w-2/3 w-full bg-white rounded-2xl shadow-2xl p-8 border border-green-100 mb-8 md:mb-0" role="region">
                <h3 id="contact-form" class="text-2xl font-semibold text-green-700 mb-4">Formulaire de contact</h3>
                <form action="https://formspree.io/f/xdkevrzz" method="POST" class="space-y-4" aria-labelledby="contact-form">
                    <div>
                        <label for="name" class="block mb-1 font-medium">Nom complet <span aria-hidden="true" class="text-red-600">*</span></label>
                        <input type="text" id="name" name="name" required aria-required="true" aria-describedby="name-desc"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                        <span id="name-desc" class="text-sm text-gray-500">Champ obligatoire</span>
                    </div>
                    <div>
                        <label for="email" class="block mb-1 font-medium">Adresse email <span aria-hidden="true" class="text-red-600">*</span></label>
                        <input type="email" id="email" name="email" required aria-required="true" aria-describedby="email-desc"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                        <span id="email-desc" class="text-sm text-gray-500">Champ obligatoire, format attendu : nom@domaine.com</span>
                    </div>
                    <div>
                        <label for="phone" class="block mb-1 font-medium">Téléphone <span class="text-gray-500">(facultatif)</span></label>
                        <input type="tel" id="phone" name="phone" aria-describedby="phone-desc"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                        <span id="phone-desc" class="text-sm text-gray-500">Champ facultatif, format attendu : 06 12 34 56 78</span>
                    </div>
                    <div>
                        <label for="message" class="block mb-1 font-medium">Votre message <span aria-hidden="true" class="text-red-600">*</span></label>
                        <textarea id="message" name="message" rows="4" required aria-required="true" aria-describedby="message-desc"
                                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"></textarea>
                        <span id="message-desc" class="text-sm text-gray-500">Champ obligatoire</span>
                    </div>
                    <fieldset class="border border-gray-300 rounded-lg p-4">
                        <legend class="block mb-1 font-medium">Format souhaité <span aria-hidden="true" class="text-red-600">*</span></legend>
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <input type="radio" id="format-braille" name="format" value="braille" required aria-required="true">
                                <label for="format-braille" class="ml-2">Version braille</label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="format-audio" name="format" value="audio" required aria-required="true">
                                <label for="format-audio" class="ml-2">Version audio</label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="format-standard" name="format" value="standard" required aria-required="true">
                                <label for="format-standard" class="ml-2">Version standard</label>
                            </div>
                            <div class="flex items-center">
                                <input type="radio" id="format-combo" name="format" value="combo" required aria-required="true">
                                <label for="format-combo" class="ml-2">Pack complet (braille + audio + standard)</label>
                            </div>
                        </div>
                    </fieldset>
                    <div class="flex items-center">
                        <input type="checkbox" id="newsletter" name="newsletter">
                        <label for="newsletter" class="ml-2">Je souhaite recevoir des informations sur les nouveaux livres accessibles</label>
                    </div>
                    <button type="submit" class="bg-green-700 hover:bg-green-800 text-white font-bold py-3 px-6 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition flex items-center">
                        Envoyer ma demande
                    </button>
                </form>
            </div>
            <div class="md:w-1/3 w-full bg-green-50 rounded-2xl shadow p-8 border border-green-100 mt-8 md:mt-0" role="region" aria-labelledby="contact-infos">
                <h3 id="contact-infos" class="text-2xl font-semibold text-green-700 mb-4">Informations de contact</h3>
                <ul class="list-disc pl-6 mb-4 text-lg space-y-2">
                    <li class="mb-2">Adresse : 123 Rue Imaginaire, 75001 Paris, France</li>
                    <li class="mb-2">Téléphone : <a href="tel:+33123456789" class="text-green-700 hover:underline">+33 1 23 45 67 89</a></li>
                    <li>Email : <a href="mailto:contact@lejardindarthur.fr" class="text-green-700 hover:underline">contact@lejardindarthur.fr</a></li>
                </ul>
                <p class="text-sm text-gray-500">Nous répondons généralement dans un délai de 48 heures.</p>
            </div>
        </section>
        <nav aria-label="Retour aux sections principales" class="mt-12 flex justify-center">
            <a href="index.html#accueil" class="inline-flex items-center text-green-700 hover:underline font-semibold text-lg focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2 transition">
                Retour à l'accueil
            </a>
        </nav>
    </main>
    <footer class="bg-green-700 text-white py-6 mt-12">
        <div class="container mx-auto px-4 flex flex-col md:flex-row justify-between items-center">
            <p class="text-sm">&copy; 2025 Le Jardin d'Arthur. Tous droits réservés.</p>
            <nav aria-label="Navigation pied de page">
                <ul class="flex space-x-4">
                    <li><a href="a-propos.html" class="hover:underline focus:underline">À propos</a></li>
                    <li><a href="contact.html" class="hover:underline focus:underline">Contact</a></li>
                    <li><a href="produit.html" class="hover:underline focus:underline">Produit</a></li>
                    <li><a href="definitions.html#definitions-heading" class="hover:underline focus:underline">Définitions</a></li>
                </ul>
            </nav>
        </div>
    </footer>

    <!-- Popup de confirmation accessible -->
    <div id="confirm-popup" role="dialog" aria-modal="true" aria-labelledby="confirm-title" aria-describedby="confirm-desc" tabindex="-1" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-xl p-8 max-w-md w-full outline-none" tabindex="0">
            <h2 id="confirm-title" class="text-xl font-bold mb-4">Confirmer l'envoi</h2>
            <p id="confirm-desc" class="mb-6">Voulez-vous vraiment envoyer ce formulaire&nbsp;?</p>
            <div class="flex justify-end space-x-4">
                <button id="confirm-cancel" type="button" class="px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 focus:ring-2 focus:ring-green-500">Annuler (Échap)</button>
                <button id="confirm-ok" type="button" class="px-4 py-2 rounded bg-green-700 text-white hover:bg-green-800 focus:ring-2 focus:ring-green-500">Confirmer (Entrée)</button>
            </div>
        </div>
    </div>

    <script>
    // Accessibilité : confirmation avant envoi du formulaire
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.querySelector('form[action^="https://formspree.io"]');
        const popup = document.getElementById('confirm-popup');
        const btnOk = document.getElementById('confirm-ok');
        const btnCancel = document.getElementById('confirm-cancel');
        let lastFocused;

        if (!form) return;

        form.addEventListener('submit', function (e) {
            // Empêche l'envoi immédiat
            e.preventDefault();
            lastFocused = document.activeElement;
            popup.classList.remove('hidden');
            popup.focus();
            // Piège le focus dans la popup
            trapFocus(popup);
        });

        btnOk.addEventListener('click', function () {
            closePopup();
            form.submit();
        });
        btnCancel.addEventListener('click', function () {
            closePopup();
        });
        // Gestion clavier
        popup.addEventListener('keydown', function (e) {
            if (e.key === 'Escape') {
                e.preventDefault();
                closePopup();
            } else if (e.key === 'Enter') {
                e.preventDefault();
                closePopup();
                form.submit();
            }
        });
        function closePopup() {
            popup.classList.add('hidden');
            if (lastFocused) lastFocused.focus();
        }
        // Focus trap simple
        function trapFocus(element) {
            const focusable = element.querySelectorAll('button, [tabindex]:not([tabindex="-1"])');
            const first = focusable[0];
            const last = focusable[focusable.length - 1];
            element.addEventListener('keydown', function(e) {
                if (e.key === 'Tab') {
                    if (e.shiftKey) {
                        if (document.activeElement === first) {
                            e.preventDefault();
                            last.focus();
                        }
                    } else {
                        if (document.activeElement === last) {
                            e.preventDefault();
                            first.focus();
                        }
                    }
                }
            });
            setTimeout(() => first.focus(), 10);
        }
    });
    </script>
</body>
</html>
